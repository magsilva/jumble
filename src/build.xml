<?xml version="1.0" encoding="ISO-8859-1"?>
<project name="jumble" basedir="." default="zipall">

    <property name="src.dir" value="."/>
    <property name="test.dir" value = "../jumbletest"/>
	<property name="release.dir" value="C:\jumblerelease"/>
	<property name="classes.dir" value="${release.dir}/bin"/>
	<property name="pics.dir" value="${release.dir}/pics"/>
	<property name="outsrc.dir" value="${release.dir}/src"/>
    <property name="lib.dir" value="${release.dir}/lib"/>
	
	<property name="bcel.jar" value="C:\jakarta\bcel-5.1\bcel-5.1.jar"/>
	<property name="junit.jar" value="C:\junit3.8.1\junit.jar"/>
	
	<target name="clean" description="Delete all generated files">
        <delete dir="${classes.dir}" failonerror="false"/>
        <delete file="${release.dir}/${ant.project.name}.jar"/>
    	<delete file="${release.dir}/${ant.project.name}.zip"/>
    	<delete dir="${pics.dir}" failonerror="false"/>
		<delete dir="${outsrc.dir}" failonerror="false"/>
		<delete dir="${lib.dir}" failonerror="false"/>
    </target>

	<target name="copypics" description="Copy pictures to release directory" depends="clean">
		<mkdir dir="${pics.dir}"/>
		<copy todir="${pics.dir}">
			<fileset dir="${src.dir}/jumble" casesensitive="no">
			  <include name="**/*.gif"/>
			</fileset>
		</copy>
	</target>
	
	<target name="copysrc" depends="clean" description="Copy source to release directory">
		<mkdir dir="${outsrc.dir}"/>
		<copy todir="${outsrc.dir}">
			<fileset dir="${src.dir}" casesensitive="no">
			  <include name="**/*.java"/>
			</fileset>
		</copy>
	</target>
    
	<target name="compile" description="Compiles the Task" depends="clean">
        <mkdir dir="${classes.dir}"/>
       <javac srcdir="${src.dir}" destdir="${classes.dir}" debug="true"/>
    </target>
	
	<target name="compiletests" description="Compiles the Task" depends="compile">
	   <javac srcdir="${test.dir}" destdir="${classes.dir}" debug="true"/>
	</target>
	
    <target name="jar" description="JARs the Task" depends="compile,compiletests">
    	<mkdir dir="${lib.dir}"/>
    	<jar destfile="${lib.dir}/${ant.project.name}.jar">
        	<fileset dir="${classes.dir}"/>
        </jar>
    </target>

	<target name="zipall" description="Zips release directory for distribution"
		depends="copypics,copysrc,compile,jar,lib">
		<zip destfile="${release.dir}/${ant.project.name}.zip" basedir="${release.dir}"/>
	</target>
	
	<target name="lib" description="Copies the Junit and JARS to the destination directory"
		depends="clean, jar">
		<mkdir dir="${lib.dir}"/>
		<copy file="${junit.jar}" todir="${lib.dir}"/>
		<copy file="${bcel.jar}" todir="${lib.dir}"/>
	</target>
</project>